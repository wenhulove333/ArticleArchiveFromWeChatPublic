#Git之文件比较#
很多时候我们不仅仅想知道小伙伴们上传了代码去新增了哪些功能，解决了那些问题，还想知道小伙伴们智慧的结晶，偷偷的学一下。文件比较这个时候就非常重要了，这一篇，我们就从linux系统里面的diff一点点的说下如何解读文件差异报告。
##diff三种格式##
为了更好的说明这三种格式，我们准备两个文件file1和file2.
file1里面文件内容如下：
a
a
a
a
a
a
file2里面文件内容如下：
a
a
a
b
a
a
###正常格式###
在linux系统里面我们使用命令diff file1 file2可以得到如下结果：

	[root@localhost diffcheck]# diff file1 file2

	4c4

	< a

	---

	> b

下面我们来解读下这段差异报告，首先我们看4c4，第一个4表示file1的第4行发生变化；中间的c表示内容改变（change的首字母），大家肯定快速的想到了其他两个了，add和deletion，very smart；最后的4表示变成了file2的第4行。

然后我们再来看< a，<表示从file1中移除该行，后面的a表示该行的内容；

好了，我们接着看---，它用来分割file1和file2；

最后，我们来看> b，>表示在file2中增加该行，后面的b表示该行的内容。
###上下文格式###
同样适用上述的文件进行比较，我们使用命令diff -c file1 file2输出另外一种差异报告。

	[root@localhost diffcheck]# diff -c file1 file2
	*** file1       2016-01-05 19:10:38.589660947 +0800
	--- file2       2016-01-05 19:10:56.350793420 +0800
	***************
	*** 1,6 ****
	  a
	  a
	  a
	! a
	  a
	  a
	--- 1,6 ----
	  a
	  a
	  a
	! b
	  a
	  a

我们把上面的结果分成4部分来看：

- 前2行显示了文件的基本信息

- 第3行星号用来分割文件基本信息和差异报告。
 
-  第4-10行表示file1里面的内容变动。这部分里面的第1行表示，从第1行连续显示6行；第5行显示了变动的部分，! 表示change，-号表示deletion，+号表示add。

- 第11-17行表示file2里面的文件变动，表示方法和file1的那一部分类似。

###合并格式###
看到上下文方式的表示方法，我们会发现显示了很多重复的内容。有追求的开源大神们推出了合并格式。

##Git用的diff格式##

我们使用命令diff -u file1 file2输出差异报告。

	[root@localhost diffcheck]# diff -u file1 file2 
	--- file1       2016-01-05 19:10:38.589660947 +0800
	+++ file2       2016-01-05 19:10:56.350793420 +0800
	@@ -1,6 +1,6 @@
	 a
	 a
	 a
	-a
	+b
	 a
	 a

我们把上面的结果分成3部分来看：

- 前2行表示文件的基本信息

- 第3行表示文件的变动情况，两边的两个@表示开始和结束；-号表示file1；+号表示file2；1,6表示显示具体信息的时候从文件中第1行开始显示6行。

- 第4-10行表示文件的具体内容的变动。-号表示第一个文件删除的行，加号表示第二个文件新增的行，空表示没有变动。

了解到上述的三种文件差异报告格式，我们来看下要了解的核心Git格式的diff是怎么样的？其实它使用的是合并格式的变体。

我们使用命令git diff file1 file2输出差异报告。

	[root@localhost diffcheck]# git diff file1 file2 
	diff --git a/file1 b/file2
	index 786e4a7..5fe65d6 100644
	--- a/file1
	+++ b/file2
	@@ -1,6 +1,6 @@
	 a
	 a
	 a
	-a
	+b
	 a
	 a

大家看看，是不是和合并格式很像。

我们把上面的结果分成5部分来看：

- 第1行表示为git格式的diff

- 第2行表示两个版本的Git哈希值，前面786e4a7是index区域，后面5fe65d6为工作区域，最后的6位数字是对象模式（普通文件，644权限）。

- 第3，4行表示进行比较的两个文件，---表示变动前的文件，+++表示变动后的文件。

- 后面的两个部分和合并格式是一样的，这里就不多说了。

