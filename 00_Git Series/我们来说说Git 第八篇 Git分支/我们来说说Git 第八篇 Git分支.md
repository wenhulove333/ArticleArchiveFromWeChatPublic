#我们来说说Git 第八篇 Git分支#
说到分支，相信用过版本控制系统的小伙伴们对这个概念一点都不陌生。但是你对你用过的分支功能感觉如何呢？喜欢用吗？用过SVN的小伙伴估计挺痛恨分支的吧，最后合入到主线的时候是不是都快疯了。

如果你用过Git的分支的话，我想你肯定会爱上它的。Git分支有何特别之处呢？我们还是要啰嗦下，Git是一个小型的文件管理系统，新建分支是非常快速的一件事情，不像SVN那样，创建一个分支费老大劲了。不仅如此，Git在不同分支间切换也非常的迅速。正因为如此，Git鼓励在工作流程中频繁使用分支和合并。下面我们就一点一点的揭开Git分支的神秘面纱。

##分支前奏曲##
在Git中提交的时候，会保存一个commit对象，它包含一个指向暂存内容快照的指针，包含本次提交的作者等相关附属信息，包含零个或多个老爹；首次提交是没有老爹的，普通的提交有一个老爹，由两个或多个分支合并产生的提交有多个老爹。

为了直观起见，我们假设工作目录有一个文件（README,test.rb,LICENSE），如果你看过前面七篇的文章，应该很容易的知道怎么通过Git命令把这个文件上传到仓库里面。

我们使用commit新建一个提交对象前，Git会计算每一个目录的校验和，然后在Git中将这些目录保存为树(tree)对象。后续Git创建新的提交对象的时候，除了包含自己的提交信息之外，还包含指向这个树的指针，这样后面就能很容易的通过这个指针来恢复镜像的内容。

我们就来说说刚刚使用commit新建的一个提交对象是什么样子的：3个表示文件内容的blob对象；1个索引到各个文件blob的tree对象；1个指向tree对象的索引和其他提交信息的commit对象。下面的图很形象的描述了这种关系。

这里有图片哦。 commit对象关系图

我们基本上面的commit新建新的commit的时候，新的commit里面会多出一个部分，就是parent对象。看下图，你就清楚了。

这里有图片哦。非首次commit

说了这么多，其实都是铺垫了，让你先了解下Git中每次commit之间是如何关联的。下面分支终于来了。

##什么是分支##
Git中的分支实质上就是指向我们上述所说的commit对象的可变指针。Git使用master作为分支的默认名字。在提交了n次之后，master分支就指向最后一次提交对象。说白了，分支就是从当前commit往前看，一直看到老祖宗。看看下面的图吧。

这里有图片，分支解释。

既然说到分支，各位肯定就要问了，怎么创建分支啊？请使用git branch。比如我们使用git branch firstbranch来创建分支firstbranch，现在有两个分支指向最后一次提交对象，那就是master和firstbranch。老样子，看看下面的图，图形记忆更深刻。

这里有图片，分支创建

分支我们创建，各位又要问了，我怎么知道我在那个分支上工作呀。当然了，还有一个名为HEAD的指针，它指向当前工作的分支。那怎么切到我们想要的分支呢，使用命令git checkout。

我们使用命令git checkout testing切到我们刚刚创建的分支。现在HEAD就指向了分支firstbranch。看看下面两个图，体会下HEAD的变化。

这里有两张图片，HEAD在master上，HEAD在分支testing上

好吧，下面我们增加一个文件test.rb，然后提交，看下分支变化。还是看图吧。

这里有图片，在新建分支上提交。

新建的分支testing往前跑了，把master甩在后面了。我们现在切到master上面看看吧，我们刚刚的增加的second.txt没有了，对吧。这样我们就可以做和新建分支testing完全不同的事情了。比如我们还是增加一个second.txt。这个时候master和testing分道扬镳了。看看下面的图，感受下。

这里有图片

由于Git中的分支实际上仅仅是一个包含所指文件对象校验和（40个字符长度SHA-1字串）的文件，所以创建和销毁一个分支很廉价的一件事情。Git中分支的创建和切换是很迅速的一件事情。


