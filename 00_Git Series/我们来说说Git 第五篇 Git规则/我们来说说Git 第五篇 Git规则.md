#Git规则#
上篇我们说了Git基本的一些命令，终于可以驾驭旷世神器了，是不是觉得很爽，敲一上午Git命令手都不酸。但是即便是有了旷世神器和武功秘籍，也是不能随意的出手，有很多规则还是要注意的，否则可能会误伤到自己哦。
##同一个文件处于多种状态##
这里有图片MultiStatusFile.png

大家第一次看到上面图中的情形，估计会感觉到很奇怪，为什么同一个文件会出现两种状态呢？
在解答这个问题之前，我们先回顾下<我们来说说Git 第二篇 Git基础>，通过第二篇，我们了解到Git实质上就是一个小的文件管理系统，每一次暂存就是对文件进行快照，而快照的文件就如同按上了手印是无法篡改的。
通过对第二篇的回顾，大家是不是有一种“原来如此”的感觉。之所以出现两个状态的原因就是一个是暂存的快照，另外一个是后续的修改。
##忽略某些文件##
我们在对工程进行编译或者采用某些编辑器的时候，会生成一些临时文件，而我们又不想把这些文件提交到仓库里面，如果每次都要单独剔除这些文件的话，肯定是一件很繁琐的事情。
我们可以创建一个名为.gitignore的文件，里面记录要忽略的文件的文件名规则。

文件.gitignore的格式规范如下：

- 所有空行或者以注释符号#开头的行都会被Git忽略。

- 最后跟反斜杠（/）说明忽略的是目录，比如build/就是忽略和.gitignore同目录的build目录。

- 在匹配模式前面加上惊叹号（!）表示取反

- 可以使用标准的glob模式匹配。

那神马是glob模式呢？glob模式是指shell所使用的简化了的正则表达式。星号（*）匹配零个或多个任意字符；[abc]匹配任何一个列在方括号中的字符；问号（？）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示在这两个字符范围内的都可以匹配（例如[1-9]，匹配1到9的任何一个字符）。

下面举一个简单的例子

    *.[oa] #忽略已o或a作为后缀的文件
    
    *~   #忽略所有以~结尾的文件
    
    bin/  #忽略bin目录

设置好这些，你以后就可以任性的使用git commit -a来提交你的代码，再也不用担心把一些杂七杂八的东西提交到仓库里面了。

这里有图片ignore.png

##移除文件##
我们都知道了，Git是一个小型的文件管理系统，但是各种状态的文件也是一件让我们崩溃的事情。

要从Git中移除某个文件，必须要从暂存区移除，而不是简单的删除本地文件。要做到这点，我们需要使用git rm命令来保证我们的删除操作已经放到暂存区，这个时候，暂存区里的内容一旦提交，删除的文件将会从仓库中移除。

如果我们想要保留本地的文件，我们需要使用命令git rm --cached，这个时候，暂存区里的内容一旦提交，删除的文件同样会从仓库中移除，但是本地文件将会被保留。这种用法主要用在误将一些中间文件上传到仓库的时候，然后再通过《忽略某些文件》章节里面介绍的方法忽略掉这些误上传的文件。
这里我们顺带说一下移动文件，移动文件我们使用命令git mv，实际上他可以拆分成三步：拷贝文件到目标目录；使用git rm删除源目录下面的文件；使用git add添加移动到目标目录的文件到暂存区。这样解释是不是清楚了很多。

##撤销操作##
有些时候难免由于脑袋疲劳或兴奋做错一些事情，而Git容忍了我们可能会犯的错误，提供了一些命令让我们可以从头再来。
###提交不完整###
当我们发现漏掉了几个文件没有提交或者提交的注释写的不是很好的时候，我们可以把未提交的文件加到暂存区，然后使用命令git commit --amend覆盖刚才失误的提交。
###取消已经暂存的文件###
我们可以使用命令git reset HEAD <paths>取消暂存的文件。
###取消对文件的修改###
有的时候，一时兴起的修改完全不符合自己的期望，想回到修改前，这时我们可以使用命令git checkout -- <paths>来抛弃文件的修改。

有了上面的这些安全措施，在使用Git的时候心里就觉得踏实了很多，有木有。目前为止，我们已经了解了Git的基本使用，有了这些知识，你就可以使用Git来和小伙伴一起和谐的开创新天地了。但是，本着精益求精的精神，下面我们的Git高阶知识就要闪亮登场，欢迎期待《我们来说说Git 第六篇 Git之文件比较》。

